---
phase: 14-bias-reduction
plan: 05
type: execute
wave: 3
depends_on: ["14-01", "14-04"]
files_modified:
  - headhunter-ui/src/components/Candidate/AnonymizedCandidateCard.tsx
  - headhunter-ui/src/components/Candidate/AnonymizedCandidateCard.css
  - headhunter-ui/src/components/Search/SearchControls.tsx
  - headhunter-ui/src/components/Search/DiversityIndicator.tsx
  - headhunter-ui/src/components/Search/SearchResults.tsx
  - headhunter-ui/src/types/index.ts
autonomous: true

must_haves:
  truths:
    - "Anonymization toggle visible in search controls"
    - "Anonymized candidate cards show only skills/experience"
    - "Diversity indicator shows slate warnings"
    - "Toggle state persists during search session"
  artifacts:
    - path: "headhunter-ui/src/components/Candidate/AnonymizedCandidateCard.tsx"
      provides: "Card component for anonymized candidate display"
      min_lines: 100
    - path: "headhunter-ui/src/components/Search/SearchControls.tsx"
      provides: "Search controls with anonymization toggle"
      exports: ["SearchControls"]
    - path: "headhunter-ui/src/components/Search/DiversityIndicator.tsx"
      provides: "Diversity warning display component"
      exports: ["DiversityIndicator"]
  key_links:
    - from: "headhunter-ui/src/components/Search/SearchResults.tsx"
      to: "headhunter-ui/src/components/Candidate/AnonymizedCandidateCard.tsx"
      via: "conditional rendering based on anonymizedView"
      pattern: "anonymizedView.*AnonymizedCandidateCard"
---

<objective>
Create UI components for BIAS-01 (anonymization toggle) and BIAS-05 (diversity indicators).

Purpose: Enable recruiters to use blind hiring workflow through a toggle, and see diversity warnings when candidate pools are homogeneous.

Output: React components for anonymized candidate cards, search controls with toggle, and diversity indicators.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-bias-reduction/14-RESEARCH.md

Key code files:
@headhunter-ui/src/components/Candidate/SkillAwareCandidateCard.tsx
@headhunter-ui/src/components/Search/SearchPage.tsx
@headhunter-ui/src/components/Search/SearchResults.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add anonymized types to UI</name>
  <files>headhunter-ui/src/types/index.ts</files>
  <action>
Add the following types to `headhunter-ui/src/types/index.ts` (at the end of file):

```typescript
/**
 * Anonymized candidate for blind hiring (BIAS-01)
 */
export interface AnonymizedCandidate {
  candidateId: string;
  score: number;
  vectorScore: number;
  textScore: number;
  rrfScore?: number;
  confidence: number;
  yearsExperience?: number;
  skills?: Array<{ name: string; weight: number }>;
  industries?: string[];
  matchReasons: string[];
  signalScores?: Omit<SignalScores, 'companyPedigree' | 'companyRelevance'>;
  weightsApplied?: Record<string, number>;
  mlTrajectory?: {
    nextRole: string;
    nextRoleConfidence: number;
    tenureMonths: { min: number; max: number };
    hireability: number;
    lowConfidence: boolean;
    uncertaintyReason?: string;
  };
  anonymized: true;
}

/**
 * Diversity dimension distribution
 */
export interface DimensionDistribution {
  dimension: 'companyTier' | 'experienceBand' | 'specialty';
  distribution: Record<string, number>;
  dominantGroup: string;
  concentrationPct: number;
  isConcentrated: boolean;
}

/**
 * Diversity warning for slate analysis
 */
export interface DiversityWarning {
  level: 'info' | 'warning' | 'alert';
  message: string;
  dimension: 'companyTier' | 'experienceBand' | 'specialty';
  concentrationPct: number;
  suggestion: string;
}

/**
 * Slate diversity analysis (BIAS-05)
 */
export interface SlateDiversityAnalysis {
  totalCandidates: number;
  dimensions: DimensionDistribution[];
  warnings: DiversityWarning[];
  diversityScore: number;
  hasConcentrationIssue: boolean;
}
```
  </action>
  <verify>
    cd headhunter-ui && npx tsc --noEmit
  </verify>
  <done>
    Anonymized candidate and diversity types added to UI types.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create AnonymizedCandidateCard component</name>
  <files>
    headhunter-ui/src/components/Candidate/AnonymizedCandidateCard.tsx
    headhunter-ui/src/components/Candidate/AnonymizedCandidateCard.css
  </files>
  <action>
Create `headhunter-ui/src/components/Candidate/AnonymizedCandidateCard.tsx`:

```tsx
import React, { useState } from 'react';
import { Tooltip } from '@mui/material';
import { AnonymizedCandidate, SignalScores } from '../../types';
import { SignalScoreBreakdown } from '../Match/SignalScoreBreakdown';
import { SkillChip } from '../Match/SkillChip';
import './AnonymizedCandidateCard.css';

interface AnonymizedCandidateCardProps {
  candidate: AnonymizedCandidate;
  rank?: number;
  onClick?: () => void;
  searchSkills?: string[];
}

export const AnonymizedCandidateCard: React.FC<AnonymizedCandidateCardProps> = ({
  candidate,
  rank,
  onClick,
  searchSkills = [],
}) => {
  const [expanded, setExpanded] = useState(false);
  const [signalBreakdownExpanded, setSignalBreakdownExpanded] = useState(false);

  const handleCardClick = () => {
    if (onClick) {
      onClick();
    } else {
      setExpanded(!expanded);
    }
  };

  const getScoreColor = (score: number) => {
    const normalizedScore = score <= 1 ? score * 100 : score;
    if (normalizedScore >= 80) return 'excellent';
    if (normalizedScore >= 60) return 'good';
    if (normalizedScore >= 40) return 'fair';
    return 'poor';
  };

  const formatScore = (score: number) => {
    const normalizedScore = score <= 1 ? score * 100 : score;
    return Math.round(normalizedScore);
  };

  const getExperienceLabel = (years?: number) => {
    if (years === undefined) return 'Experience not specified';
    if (years < 3) return 'Early career (0-3 years)';
    if (years < 7) return 'Mid-level (3-7 years)';
    if (years < 15) return 'Senior (7-15 years)';
    return 'Executive (15+ years)';
  };

  return (
    <div className={`anonymized-candidate-card ${expanded ? 'expanded' : ''}`}>
      {/* Blind Hiring Badge */}
      <div className="blind-hiring-badge">
        <span className="badge-icon">üë§</span>
        <span className="badge-text">Anonymized View</span>
      </div>

      <div className="card-header" onClick={handleCardClick}>
        <div className="candidate-info">
          {rank && (
            <div className="rank-badge">
              #{rank}
            </div>
          )}
          <div className="candidate-details">
            <h3 className="candidate-identifier">Candidate #{candidate.candidateId.slice(-6)}</h3>
            <p className="candidate-experience">
              {getExperienceLabel(candidate.yearsExperience)}
              {candidate.yearsExperience !== undefined && ` (${candidate.yearsExperience} years)`}
            </p>
          </div>
        </div>

        <div className="scores">
          <Tooltip title="Multi-signal match score based on qualifications" arrow placement="top">
            <div className={`score-badge match ${getScoreColor(candidate.score)}`}>
              <span className="score-value">{formatScore(candidate.score)}%</span>
              <span className="score-label">Match</span>
            </div>
          </Tooltip>
        </div>
      </div>

      <div className="card-content">
        {/* Skills Section - Primary Focus */}
        <div className="skills-section">
          <h4>Skills & Expertise</h4>
          <div className="skill-cloud">
            {candidate.skills?.slice(0, 15).map((skill, idx) => (
              <SkillChip
                key={`${skill.name}-${idx}`}
                skill={skill.name}
                type="explicit"
                confidence={skill.weight}
                isMatched={searchSkills.some(s =>
                  s.toLowerCase() === skill.name.toLowerCase()
                )}
              />
            ))}
            {(candidate.skills?.length || 0) > 15 && (
              <span className="more-skills">+{(candidate.skills?.length || 0) - 15} more</span>
            )}
          </div>
        </div>

        {/* Industries */}
        {candidate.industries && candidate.industries.length > 0 && (
          <div className="industries-section">
            <h4>Industry Experience</h4>
            <div className="industry-tags">
              {candidate.industries.map((industry, idx) => (
                <span key={idx} className="industry-tag">{industry}</span>
              ))}
            </div>
          </div>
        )}

        {/* Match Reasons (anonymized) */}
        {candidate.matchReasons.length > 0 && (
          <div className="match-reasons-section">
            <h4>Why This Candidate Matches</h4>
            <ul className="match-reasons-list">
              {candidate.matchReasons.map((reason, idx) => (
                <li key={idx}>{reason}</li>
              ))}
            </ul>
          </div>
        )}

        {/* Signal Score Breakdown - Expandable */}
        {candidate.signalScores && (
          <div className="signal-breakdown-section">
            <button
              className="breakdown-toggle"
              onClick={(e) => {
                e.stopPropagation();
                setSignalBreakdownExpanded(!signalBreakdownExpanded);
              }}
            >
              <span>Score Breakdown</span>
              <span className={`chevron ${signalBreakdownExpanded ? 'expanded' : ''}`}>&#9660;</span>
            </button>
            {signalBreakdownExpanded && (
              <div className="anonymized-breakdown">
                <SignalScoreBreakdown
                  signalScores={candidate.signalScores as SignalScores}
                  weightsApplied={candidate.weightsApplied}
                />
                <p className="breakdown-note">
                  Note: Company pedigree signals excluded in anonymized view
                </p>
              </div>
            )}
          </div>
        )}

        {/* ML Trajectory Prediction - if available */}
        {expanded && candidate.mlTrajectory && (
          <div className="trajectory-section">
            <h4>Career Trajectory Prediction</h4>
            <div className="trajectory-info">
              <p><strong>Predicted Next Role:</strong> {candidate.mlTrajectory.nextRole}</p>
              <p><strong>Confidence:</strong> {Math.round(candidate.mlTrajectory.nextRoleConfidence * 100)}%</p>
              <p><strong>Estimated Tenure:</strong> {candidate.mlTrajectory.tenureMonths.min}-{candidate.mlTrajectory.tenureMonths.max} months</p>
              <p><strong>Hireability Score:</strong> {candidate.mlTrajectory.hireability}/100</p>
              {candidate.mlTrajectory.lowConfidence && (
                <p className="low-confidence-warning">
                  ‚ö†Ô∏è Low confidence: {candidate.mlTrajectory.uncertaintyReason}
                </p>
              )}
            </div>
          </div>
        )}
      </div>

      <div className="card-footer" onClick={() => setExpanded(!expanded)}>
        <button className="expand-button">
          {expanded ? 'Show Less' : 'Show More Details'}
        </button>
      </div>

      {/* Privacy Notice */}
      <div className="privacy-notice">
        <p>
          Identifying information hidden to reduce unconscious bias.
          Reveal candidate identity after shortlisting decision.
        </p>
      </div>
    </div>
  );
};
```

Create `headhunter-ui/src/components/Candidate/AnonymizedCandidateCard.css`:

```css
.anonymized-candidate-card {
  background: #fff;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  margin-bottom: 16px;
  overflow: hidden;
  transition: all 0.2s ease;
  position: relative;
}

.anonymized-candidate-card:hover {
  border-color: #2196f3;
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
}

.blind-hiring-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 4px 10px;
  border-radius: 16px;
  font-size: 11px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 4px;
  z-index: 1;
}

.badge-icon {
  font-size: 12px;
}

.card-header {
  padding: 16px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  cursor: pointer;
  background: linear-gradient(to right, #f8f9fa, #ffffff);
}

.candidate-info {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.rank-badge {
  background: #e3f2fd;
  color: #1976d2;
  padding: 4px 10px;
  border-radius: 8px;
  font-weight: 700;
  font-size: 14px;
}

.candidate-identifier {
  font-size: 18px;
  font-weight: 600;
  color: #333;
  margin: 0 0 4px 0;
}

.candidate-experience {
  font-size: 14px;
  color: #666;
  margin: 0;
}

.scores {
  display: flex;
  gap: 8px;
}

.score-badge {
  padding: 8px 12px;
  border-radius: 8px;
  text-align: center;
  min-width: 60px;
}

.score-badge.excellent { background: #e8f5e9; }
.score-badge.good { background: #fff3e0; }
.score-badge.fair { background: #fff8e1; }
.score-badge.poor { background: #ffebee; }

.score-value {
  display: block;
  font-size: 18px;
  font-weight: 700;
}

.score-label {
  display: block;
  font-size: 10px;
  text-transform: uppercase;
  color: #666;
}

.card-content {
  padding: 0 16px 16px;
}

.skills-section,
.industries-section,
.match-reasons-section,
.trajectory-section {
  margin-bottom: 16px;
}

.skills-section h4,
.industries-section h4,
.match-reasons-section h4,
.trajectory-section h4 {
  font-size: 13px;
  font-weight: 600;
  color: #555;
  margin: 0 0 8px 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.skill-cloud {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.more-skills {
  font-size: 12px;
  color: #666;
  padding: 4px 8px;
  background: #f5f5f5;
  border-radius: 12px;
}

.industry-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.industry-tag {
  font-size: 12px;
  color: #555;
  padding: 4px 10px;
  background: #f0f4f8;
  border-radius: 12px;
}

.match-reasons-list {
  margin: 0;
  padding-left: 20px;
}

.match-reasons-list li {
  font-size: 13px;
  color: #555;
  margin-bottom: 4px;
}

.signal-breakdown-section {
  border-top: 1px solid #eee;
  padding-top: 12px;
  margin-top: 12px;
}

.breakdown-toggle {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: none;
  border: none;
  padding: 8px 0;
  cursor: pointer;
  font-size: 13px;
  font-weight: 600;
  color: #1976d2;
}

.chevron {
  transition: transform 0.2s ease;
}

.chevron.expanded {
  transform: rotate(180deg);
}

.anonymized-breakdown {
  margin-top: 12px;
}

.breakdown-note {
  font-size: 11px;
  color: #888;
  font-style: italic;
  margin-top: 8px;
}

.trajectory-section {
  border-top: 1px solid #eee;
  padding-top: 12px;
}

.trajectory-info p {
  font-size: 13px;
  color: #555;
  margin: 4px 0;
}

.low-confidence-warning {
  color: #f57c00 !important;
  font-weight: 500;
}

.card-footer {
  border-top: 1px solid #eee;
  padding: 12px 16px;
  text-align: center;
}

.expand-button {
  background: none;
  border: 1px solid #ddd;
  padding: 8px 16px;
  border-radius: 20px;
  cursor: pointer;
  font-size: 13px;
  color: #555;
  transition: all 0.2s ease;
}

.expand-button:hover {
  background: #f5f5f5;
  border-color: #bbb;
}

.privacy-notice {
  background: #f5f5f5;
  padding: 10px 16px;
  border-top: 1px solid #eee;
}

.privacy-notice p {
  font-size: 11px;
  color: #777;
  margin: 0;
  text-align: center;
}

/* Expanded state */
.anonymized-candidate-card.expanded {
  border-color: #2196f3;
}

.anonymized-candidate-card.expanded .card-header {
  background: linear-gradient(to right, #e3f2fd, #ffffff);
}
```
  </action>
  <verify>
    cd headhunter-ui && npx tsc --noEmit
  </verify>
  <done>
    AnonymizedCandidateCard component created with blind hiring styling and privacy notice.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create SearchControls and DiversityIndicator components</name>
  <files>
    headhunter-ui/src/components/Search/SearchControls.tsx
    headhunter-ui/src/components/Search/DiversityIndicator.tsx
    headhunter-ui/src/components/Search/SearchResults.tsx
  </files>
  <action>
Create `headhunter-ui/src/components/Search/SearchControls.tsx`:

```tsx
import React from 'react';
import { Tooltip, Switch, FormControlLabel } from '@mui/material';
import './SearchControls.css';

interface SearchControlsProps {
  anonymizedView: boolean;
  onToggleAnonymized: (enabled: boolean) => void;
  disabled?: boolean;
}

export const SearchControls: React.FC<SearchControlsProps> = ({
  anonymizedView,
  onToggleAnonymized,
  disabled = false,
}) => {
  return (
    <div className="search-controls">
      <div className="control-group anonymized-toggle-group">
        <Tooltip
          title="Enable blind hiring mode to reduce unconscious bias. Hides candidate names, photos, company names, and school names."
          arrow
          placement="bottom"
        >
          <FormControlLabel
            control={
              <Switch
                checked={anonymizedView}
                onChange={(e) => onToggleAnonymized(e.target.checked)}
                disabled={disabled}
                color="primary"
              />
            }
            label={
              <span className="toggle-label">
                <span className="toggle-icon">üë§</span>
                <span className="toggle-text">Anonymized View</span>
                {anonymizedView && <span className="toggle-badge">Active</span>}
              </span>
            }
          />
        </Tooltip>
        {anonymizedView && (
          <p className="anonymized-description">
            Blind hiring mode active. Candidate identities hidden to reduce bias.
          </p>
        )}
      </div>
    </div>
  );
};
```

Create `headhunter-ui/src/components/Search/SearchControls.css`:

```css
.search-controls {
  padding: 12px 16px;
  background: #f8f9fa;
  border-radius: 8px;
  margin-bottom: 16px;
}

.control-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.anonymized-toggle-group {
  border-left: 3px solid #667eea;
  padding-left: 12px;
}

.toggle-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 500;
}

.toggle-icon {
  font-size: 16px;
}

.toggle-badge {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
}

.anonymized-description {
  font-size: 12px;
  color: #666;
  margin: 4px 0 0 42px;
  font-style: italic;
}
```

Create `headhunter-ui/src/components/Search/DiversityIndicator.tsx`:

```tsx
import React, { useState } from 'react';
import { Tooltip } from '@mui/material';
import { SlateDiversityAnalysis, DiversityWarning } from '../../types';
import './DiversityIndicator.css';

interface DiversityIndicatorProps {
  analysis: SlateDiversityAnalysis;
}

export const DiversityIndicator: React.FC<DiversityIndicatorProps> = ({
  analysis,
}) => {
  const [expanded, setExpanded] = useState(false);

  if (!analysis.hasConcentrationIssue && analysis.diversityScore >= 60) {
    // Diverse slate - show positive indicator
    return (
      <div className="diversity-indicator diverse">
        <span className="diversity-icon">‚úÖ</span>
        <span className="diversity-text">Diverse slate (score: {analysis.diversityScore}/100)</span>
      </div>
    );
  }

  const getWarningColor = (level: DiversityWarning['level']) => {
    switch (level) {
      case 'alert': return 'alert';
      case 'warning': return 'warning';
      default: return 'info';
    }
  };

  const topWarning = analysis.warnings
    .sort((a, b) => b.concentrationPct - a.concentrationPct)[0];

  return (
    <div className={`diversity-indicator ${getWarningColor(topWarning?.level || 'info')}`}>
      <div className="indicator-header" onClick={() => setExpanded(!expanded)}>
        <span className="diversity-icon">
          {topWarning?.level === 'alert' ? 'üö®' : topWarning?.level === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'}
        </span>
        <span className="diversity-text">{topWarning?.message || 'Diversity analysis available'}</span>
        <span className={`expand-chevron ${expanded ? 'expanded' : ''}`}>‚ñº</span>
      </div>

      {expanded && (
        <div className="indicator-details">
          <div className="diversity-score">
            <span className="score-label">Diversity Score:</span>
            <span className={`score-value ${analysis.diversityScore < 50 ? 'low' : ''}`}>
              {analysis.diversityScore}/100
            </span>
          </div>

          {analysis.warnings.map((warning, idx) => (
            <div key={idx} className={`warning-item ${warning.level}`}>
              <p className="warning-message">{warning.message}</p>
              <p className="warning-suggestion">
                <strong>Suggestion:</strong> {warning.suggestion}
              </p>
            </div>
          ))}

          <div className="dimension-breakdown">
            <h4>Distribution by Dimension</h4>
            {analysis.dimensions.map((dim, idx) => (
              <div key={idx} className="dimension-item">
                <span className="dimension-name">{formatDimensionName(dim.dimension)}</span>
                <div className="distribution-bar">
                  {Object.entries(dim.distribution).map(([group, count]) => {
                    const pct = (count / analysis.totalCandidates) * 100;
                    return (
                      <Tooltip
                        key={group}
                        title={`${group}: ${count} candidates (${Math.round(pct)}%)`}
                        arrow
                      >
                        <div
                          className={`bar-segment ${group === dim.dominantGroup ? 'dominant' : ''}`}
                          style={{ width: `${pct}%` }}
                        />
                      </Tooltip>
                    );
                  })}
                </div>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};

function formatDimensionName(dimension: string): string {
  switch (dimension) {
    case 'companyTier': return 'Company Background';
    case 'experienceBand': return 'Experience Level';
    case 'specialty': return 'Technical Specialty';
    default: return dimension;
  }
}
```

Create `headhunter-ui/src/components/Search/DiversityIndicator.css`:

```css
.diversity-indicator {
  padding: 12px 16px;
  border-radius: 8px;
  margin-bottom: 16px;
}

.diversity-indicator.diverse {
  background: #e8f5e9;
  border-left: 4px solid #4caf50;
}

.diversity-indicator.info {
  background: #e3f2fd;
  border-left: 4px solid #2196f3;
}

.diversity-indicator.warning {
  background: #fff3e0;
  border-left: 4px solid #ff9800;
}

.diversity-indicator.alert {
  background: #ffebee;
  border-left: 4px solid #f44336;
}

.indicator-header {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.diversity-icon {
  font-size: 16px;
}

.diversity-text {
  flex: 1;
  font-size: 14px;
  font-weight: 500;
}

.expand-chevron {
  font-size: 10px;
  transition: transform 0.2s ease;
}

.expand-chevron.expanded {
  transform: rotate(180deg);
}

.indicator-details {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.diversity-score {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.score-label {
  font-size: 13px;
  color: #555;
}

.score-value {
  font-size: 18px;
  font-weight: 700;
  color: #333;
}

.score-value.low {
  color: #f44336;
}

.warning-item {
  background: rgba(255, 255, 255, 0.5);
  padding: 10px;
  border-radius: 6px;
  margin-bottom: 8px;
}

.warning-message {
  font-size: 13px;
  margin: 0 0 6px 0;
}

.warning-suggestion {
  font-size: 12px;
  color: #555;
  margin: 0;
}

.dimension-breakdown {
  margin-top: 12px;
}

.dimension-breakdown h4 {
  font-size: 12px;
  font-weight: 600;
  color: #555;
  margin: 0 0 8px 0;
  text-transform: uppercase;
}

.dimension-item {
  margin-bottom: 8px;
}

.dimension-name {
  font-size: 12px;
  color: #666;
  display: block;
  margin-bottom: 4px;
}

.distribution-bar {
  display: flex;
  height: 12px;
  border-radius: 6px;
  overflow: hidden;
  background: #eee;
}

.bar-segment {
  height: 100%;
  background: #90caf9;
  transition: width 0.3s ease;
}

.bar-segment.dominant {
  background: #1976d2;
}

.bar-segment:not(:last-child) {
  border-right: 1px solid white;
}
```

Update `headhunter-ui/src/components/Search/SearchResults.tsx` to integrate the new components.

Add imports at the top:
```tsx
import { SearchControls } from './SearchControls';
import { DiversityIndicator } from './DiversityIndicator';
import { AnonymizedCandidateCard } from '../Candidate/AnonymizedCandidateCard';
```

Add state for anonymized view:
```tsx
const [anonymizedView, setAnonymizedView] = useState(false);
```

Add SearchControls and DiversityIndicator before the results list, and conditionally render AnonymizedCandidateCard:

```tsx
{/* Add after results header, before candidate list */}
<SearchControls
  anonymizedView={anonymizedView}
  onToggleAnonymized={setAnonymizedView}
  disabled={loading}
/>

{/* Add diversity indicator if analysis available */}
{results?.diversityAnalysis && (
  <DiversityIndicator analysis={results.diversityAnalysis} />
)}

{/* Conditionally render card type */}
{anonymizedView ? (
  <AnonymizedCandidateCard
    candidate={candidate as any}  // Type assertion for anonymized
    rank={index + 1}
    searchSkills={searchSkills}
  />
) : (
  <SkillAwareCandidateCard
    candidate={candidate}
    matchScore={candidate.score}
    rank={index + 1}
    searchSkills={searchSkills}
    // ... other props
  />
)}
```
  </action>
  <verify>
    cd headhunter-ui && npx tsc --noEmit
  </verify>
  <done>
    SearchControls with anonymization toggle and DiversityIndicator components created, SearchResults updated to integrate them.
  </done>
</task>

</tasks>

<verification>
- TypeScript compiles: `cd headhunter-ui && npx tsc --noEmit`
- Components render: Start dev server and verify toggle and indicator display
- AnonymizedCandidateCard hides name/photo: Visual verification
- DiversityIndicator shows warnings: Visual verification with concentrated slate
</verification>

<success_criteria>
1. AnonymizedCandidateCard component shows only skills, experience, industries
2. No name, photo, company names, or school names visible in anonymized view
3. SearchControls has working anonymization toggle
4. DiversityIndicator displays warnings for concentrated slates
5. Toggle state controls which card component renders
6. All components compile without TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/14-bias-reduction/14-05-SUMMARY.md`
</output>
