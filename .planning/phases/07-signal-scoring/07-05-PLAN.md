---
phase: 07-signal-scoring
plan: 05
type: execute
wave: 4
depends_on: ["07-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "TypeScript compilation passes for hh-search-svc"
    - "Searching for skills returns candidates with skills_exact_score in results"
    - "Candidates with all required skills rank higher than partial matches"
    - "Senior role searches rank Senior candidates higher than Junior"
    - "All 5 Phase 7 success criteria are verified"
  artifacts: []
  key_links: []
---

<objective>
Verify Phase 7 implementation meets all success criteria through manual testing and TypeScript compilation.

Purpose: Ensure all 5 Phase 7 requirements (SCOR-02 through SCOR-06) are correctly implemented.

Output: Verification results confirming Phase 7 is complete.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-signal-scoring/07-RESEARCH.md
@.planning/phases/07-signal-scoring/07-01-SUMMARY.md
@.planning/phases/07-signal-scoring/07-02-SUMMARY.md
@.planning/phases/07-signal-scoring/07-03-SUMMARY.md
@.planning/phases/07-signal-scoring/07-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: TypeScript Compilation Verification</name>
  <files></files>
  <action>
Run TypeScript compilation for hh-search-svc to ensure all code compiles without errors:

```bash
cd services/hh-search-svc
npx tsc --noEmit
```

Verify:
- No TypeScript errors
- All imports resolve correctly
- All new types are recognized

If errors occur, document them and fix before proceeding.
  </action>
  <verify>
Command exits with code 0 (success)
No error output
  </verify>
  <done>TypeScript compilation passes without errors</done>
</task>

<task type="auto">
  <name>Task 2: Module Export Verification</name>
  <files></files>
  <action>
Verify all new exports are accessible:

```bash
cd services/hh-search-svc
node -e "
const sc = require('./dist/signal-calculators');
console.log('Exports:', Object.keys(sc));
const expected = [
  'calculateSkillsExactMatch',
  'calculateSkillsInferred',
  'calculateSeniorityAlignment',
  'calculateRecencyBoost',
  'calculateCompanyRelevance',
  'detectCompanyTier'
];
const missing = expected.filter(e => !sc[e]);
if (missing.length > 0) {
  console.error('Missing exports:', missing);
  process.exit(1);
}
console.log('All exports present');
"
```

Build first if dist doesn't exist:
```bash
npx tsc
```
  </action>
  <verify>
All 6 expected functions are exported from signal-calculators
Node script exits with code 0
  </verify>
  <done>All Phase 7 functions are properly exported</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Phase 7 Signal Scoring Implementation:
- 5 new signal calculator functions in signal-calculators.ts
- Extended SignalScores interface with 5 new fields
- Extended SignalWeightConfig with 5 new weights
- Updated ROLE_WEIGHT_PRESETS with Phase 7 signal weights
- Integration into scoring.ts and search-service.ts
  </what-built>
  <how-to-verify>
**Verification Steps:**

1. **Start the search service locally:**
   ```bash
   cd services/hh-search-svc
   npm run dev
   ```

2. **Test skill matching (SCOR-02 - Success Criteria 1):**
   Make a search request with skills filter:
   ```bash
   curl -X POST http://localhost:7102/v1/search \
     -H "Content-Type: application/json" \
     -d '{
       "query": "Python developer",
       "filters": {"skills": ["Python", "Django", "PostgreSQL"]},
       "includeDebug": true
     }'
   ```
   Verify: Results include `signalScores.skillsExactMatch` field in each candidate

3. **Test skill inference (SCOR-03 - Success Criteria 2):**
   Search for skills that have transferable matches:
   ```bash
   curl -X POST http://localhost:7102/v1/search \
     -H "Content-Type: application/json" \
     -d '{
       "query": "Kotlin developer",
       "filters": {"skills": ["Kotlin"]},
       "includeDebug": true
     }'
   ```
   Verify: Candidates with Java skills should have `skillsInferred > 0` due to Java->Kotlin transfer rule

4. **Test seniority alignment (SCOR-04 - Success Criteria 3):**
   Search with seniority filter:
   ```bash
   curl -X POST http://localhost:7102/v1/search \
     -H "Content-Type: application/json" \
     -d '{
       "query": "Senior backend engineer",
       "filters": {"seniorityLevels": ["senior"]},
       "roleType": "ic",
       "includeDebug": true
     }'
   ```
   Verify: Senior candidates have `seniorityAlignment` closer to 1.0 than Junior candidates

5. **Test recency boost (SCOR-05 - Success Criteria 4):**
   Check debug output for `recencyBoost` values:
   - Candidates with current positions using searched skills should have higher `recencyBoost`
   - Check `phase7Breakdown` in debug output

6. **Test company relevance (SCOR-06 - Success Criteria 5):**
   Search with industry filter:
   ```bash
   curl -X POST http://localhost:7102/v1/search \
     -H "Content-Type: application/json" \
     -d '{
       "query": "Fintech engineer",
       "filters": {"industries": ["Fintech", "Financial Services"]},
       "includeDebug": true
     }'
   ```
   Verify: Candidates from matching industries have higher `companyRelevance`

7. **Verify signal statistics in logs:**
   Check service logs for "Phase 7 signal statistics computed" entries showing average values

**Expected Results:**
- All 5 Phase 7 signals appear in candidate results
- Debug output includes `phase7Breakdown` with signal values
- Candidates with better matches rank higher than weak matches
  </how-to-verify>
  <resume-signal>
Type "approved" if all verification steps pass, or describe any issues found.
  </resume-signal>
</task>

</tasks>

<verification>
**Phase 7 Success Criteria (from ROADMAP.md):**

1. [SCOR-02] Candidate results include skills_exact_score reflecting % of required skills matched
2. [SCOR-03] Candidate results include skills_inferred_score for transferable skills detected
3. [SCOR-04] Searching for "Senior" returns Senior/Staff candidates ranked higher than Junior
4. [SCOR-05] Candidates who used a skill recently (last 2 years) rank higher than those who used it 5+ years ago
5. [SCOR-06] Candidates from relevant industries/companies (fintech for fintech role) rank higher

All criteria must be verified through the checkpoint testing above.
</verification>

<success_criteria>
1. TypeScript compilation passes without errors
2. All 6 Phase 7 functions are exported from signal-calculators.ts
3. Search results include all 5 Phase 7 signal scores
4. Debug output shows phase7Breakdown for top candidates
5. Human verification confirms all 5 success criteria are met
</success_criteria>

<output>
After completion, create `.planning/phases/07-signal-scoring/07-05-SUMMARY.md`

Update `.planning/STATE.md` to mark Phase 7 as complete:
- Update "Current Position" to Phase 8
- Add Phase 7 commits to session continuity
- Update phase progress table
</output>
