---
phase: 06-skills-intelligence
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - functions/src/shared/skills-inference.ts
  - functions/src/shared/skills-service.ts
autonomous: true

must_haves:
  truths:
    - "Skills inference detects implied skills from job titles (Full Stack implies JS + backend)"
    - "Inferred skills include confidence score (0-1)"
    - "Transferable skills (Java -> Kotlin) appear with explanation and confidence"
  artifacts:
    - path: "functions/src/shared/skills-inference.ts"
      provides: "Rule-based skill inference from job titles and transferable skills detection"
      exports: ["inferSkillsFromTitle", "findTransferableSkills", "InferredSkill", "TransferableSkill"]
  key_links:
    - from: "functions/src/shared/skills-inference.ts"
      to: "functions/src/shared/skills-service.ts"
      via: "imports normalizeSkillName"
      pattern: "import.*normalizeSkillName.*from.*skills-service"
---

<objective>
Create a skill inference module that detects implied skills from job titles and identifies transferable skills with confidence levels.

Purpose: Enable search to surface candidates with inferred and transferable skills (e.g., "Full Stack Engineer" implies JavaScript, database skills) with appropriate confidence weighting.

Output: `functions/src/shared/skills-inference.ts` with job title patterns and transferable skill rules.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-skills-intelligence/06-RESEARCH.md
@functions/src/shared/skills-master.ts
@functions/src/shared/skills-service.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create skills-inference.ts with job title patterns</name>
  <files>functions/src/shared/skills-inference.ts</files>
  <action>
Create `functions/src/shared/skills-inference.ts` implementing:

1. **Types:**
```typescript
interface InferredSkill {
  skill: string;           // Canonical skill name
  confidence: number;      // 0.0-1.0
  reasoning: string;       // Why this skill was inferred
  category: 'highly_probable' | 'probable' | 'likely';
}

interface TransferableSkill {
  fromSkill: string;           // Skill candidate has
  toSkill: string;             // Skill they could pivot to
  transferabilityScore: number; // 0.0-1.0
  pivotType: 'same_language_family' | 'same_paradigm' | 'same_domain' | 'complementary';
  estimatedLearningTime: 'weeks' | 'months' | 'year';
  reasoning: string;
}
```

2. **Job title inference patterns:**
Create `JOB_TITLE_PATTERNS` map covering:

```typescript
const JOB_TITLE_PATTERNS: Record<string, InferredSkill[]> = {
  'full stack': [
    { skill: 'JavaScript', confidence: 0.95, reasoning: 'Core frontend requirement', category: 'highly_probable' },
    { skill: 'React', confidence: 0.75, reasoning: 'Most common frontend framework', category: 'probable' },
    { skill: 'Node.js', confidence: 0.70, reasoning: 'Common backend for full stack', category: 'probable' },
    { skill: 'SQL', confidence: 0.85, reasoning: 'Database knowledge required', category: 'highly_probable' },
    { skill: 'Git', confidence: 0.90, reasoning: 'Version control essential', category: 'highly_probable' },
  ],
  'backend engineer': [
    { skill: 'API Design', confidence: 0.90, reasoning: 'Core backend responsibility', category: 'highly_probable' },
    { skill: 'SQL', confidence: 0.80, reasoning: 'Most backends use relational DBs', category: 'probable' },
    { skill: 'Docker', confidence: 0.70, reasoning: 'Standard containerization', category: 'probable' },
  ],
  'frontend developer': [
    { skill: 'JavaScript', confidence: 0.98, reasoning: 'Frontend requires JS', category: 'highly_probable' },
    { skill: 'HTML/CSS', confidence: 0.95, reasoning: 'Web fundamentals', category: 'highly_probable' },
    { skill: 'React', confidence: 0.70, reasoning: 'Most popular framework', category: 'probable' },
  ],
  'data engineer': [
    { skill: 'Python', confidence: 0.85, reasoning: 'Primary data engineering language', category: 'highly_probable' },
    { skill: 'SQL', confidence: 0.95, reasoning: 'Essential for data pipelines', category: 'highly_probable' },
    { skill: 'Apache Spark', confidence: 0.65, reasoning: 'Common big data tool', category: 'probable' },
  ],
  'devops': [
    { skill: 'Docker', confidence: 0.85, reasoning: 'Standard containerization', category: 'highly_probable' },
    { skill: 'Kubernetes', confidence: 0.75, reasoning: 'Container orchestration', category: 'probable' },
    { skill: 'CI/CD', confidence: 0.90, reasoning: 'Core DevOps practice', category: 'highly_probable' },
    { skill: 'Linux', confidence: 0.85, reasoning: 'DevOps infrastructure OS', category: 'highly_probable' },
  ],
  'machine learning': [
    { skill: 'Python', confidence: 0.95, reasoning: 'Primary ML language', category: 'highly_probable' },
    { skill: 'TensorFlow', confidence: 0.60, reasoning: 'Popular ML framework', category: 'probable' },
    { skill: 'Statistics', confidence: 0.80, reasoning: 'ML foundation', category: 'probable' },
  ],
  'site reliability': [
    { skill: 'Linux', confidence: 0.90, reasoning: 'SRE infrastructure foundation', category: 'highly_probable' },
    { skill: 'Kubernetes', confidence: 0.80, reasoning: 'Container orchestration standard', category: 'highly_probable' },
    { skill: 'Monitoring', confidence: 0.85, reasoning: 'Core SRE responsibility', category: 'highly_probable' },
  ],
  'mobile developer': [
    { skill: 'Git', confidence: 0.90, reasoning: 'Version control standard', category: 'highly_probable' },
  ],
  'ios': [
    { skill: 'Swift', confidence: 0.90, reasoning: 'Primary iOS language', category: 'highly_probable' },
    { skill: 'iOS Development', confidence: 0.95, reasoning: 'Platform expertise', category: 'highly_probable' },
  ],
  'android': [
    { skill: 'Kotlin', confidence: 0.85, reasoning: 'Modern Android language', category: 'highly_probable' },
    { skill: 'Android Development', confidence: 0.95, reasoning: 'Platform expertise', category: 'highly_probable' },
  ],
  'cloud architect': [
    { skill: 'Cloud Architecture', confidence: 0.95, reasoning: 'Core role responsibility', category: 'highly_probable' },
    { skill: 'AWS', confidence: 0.80, reasoning: 'Leading cloud platform', category: 'probable' },
    { skill: 'Terraform', confidence: 0.70, reasoning: 'IaC standard', category: 'probable' },
  ],
  'security engineer': [
    { skill: 'Security', confidence: 0.95, reasoning: 'Core role responsibility', category: 'highly_probable' },
    { skill: 'Linux', confidence: 0.80, reasoning: 'Security infrastructure', category: 'probable' },
  ],
  'tech lead': [
    { skill: 'Leadership', confidence: 0.90, reasoning: 'Lead role responsibility', category: 'highly_probable' },
    { skill: 'System Design', confidence: 0.85, reasoning: 'Architecture decisions', category: 'highly_probable' },
  ],
  'engineering manager': [
    { skill: 'Leadership', confidence: 0.95, reasoning: 'Manager responsibility', category: 'highly_probable' },
    { skill: 'People Management', confidence: 0.90, reasoning: 'Team management', category: 'highly_probable' },
    { skill: 'Agile', confidence: 0.80, reasoning: 'Process management', category: 'probable' },
  ],
};
```

3. **Inference function:**
```typescript
function inferSkillsFromTitle(jobTitle: string): InferredSkill[]
```
- Normalize title to lowercase
- Match against all patterns (partial match, e.g., "Senior Full Stack Engineer" matches "full stack")
- Combine matches from multiple patterns
- Deduplicate by skill, keeping highest confidence
- Sort by confidence descending

4. **Log pattern count at initialization.**
  </action>
  <verify>
```bash
cd "/Volumes/Extreme Pro/myprojects/headhunter/functions"
npx tsc --noEmit
```
TypeScript compilation passes.
  </verify>
  <done>
- skills-inference.ts exists with JOB_TITLE_PATTERNS covering 14+ title patterns
- inferSkillsFromTitle() returns InferredSkill[] with confidence scores
- Patterns cover: full stack, backend, frontend, data, devops, ML, SRE, mobile, cloud, security, tech lead, engineering manager
- Deduplication keeps highest confidence per skill
- TypeScript compiles cleanly
  </done>
</task>

<task type="auto">
  <name>Task 2: Add transferable skills detection</name>
  <files>functions/src/shared/skills-inference.ts</files>
  <action>
Add transferable skills detection to skills-inference.ts:

1. **Transferable skill rules:**
```typescript
const TRANSFERABLE_SKILL_RULES: TransferableSkill[] = [
  // Same language family - high transferability
  {
    fromSkill: 'Java',
    toSkill: 'Kotlin',
    transferabilityScore: 0.90,
    pivotType: 'same_language_family',
    estimatedLearningTime: 'weeks',
    reasoning: 'Kotlin is JVM-based, interoperable with Java, similar syntax'
  },
  {
    fromSkill: 'JavaScript',
    toSkill: 'TypeScript',
    transferabilityScore: 0.95,
    pivotType: 'same_language_family',
    estimatedLearningTime: 'weeks',
    reasoning: 'TypeScript is superset of JavaScript'
  },
  {
    fromSkill: 'Python',
    toSkill: 'Go',
    transferabilityScore: 0.60,
    pivotType: 'same_domain',
    estimatedLearningTime: 'months',
    reasoning: 'Both used for backend services, different paradigms'
  },
  {
    fromSkill: 'Java',
    toSkill: 'Go',
    transferabilityScore: 0.65,
    pivotType: 'same_domain',
    estimatedLearningTime: 'months',
    reasoning: 'Both statically typed backend languages'
  },
  // Same paradigm - medium transferability
  {
    fromSkill: 'React',
    toSkill: 'Vue.js',
    transferabilityScore: 0.75,
    pivotType: 'same_paradigm',
    estimatedLearningTime: 'months',
    reasoning: 'Both component-based frontend frameworks'
  },
  {
    fromSkill: 'React',
    toSkill: 'Angular',
    transferabilityScore: 0.65,
    pivotType: 'same_paradigm',
    estimatedLearningTime: 'months',
    reasoning: 'Both frontend frameworks, different patterns'
  },
  {
    fromSkill: 'Django',
    toSkill: 'Flask',
    transferabilityScore: 0.85,
    pivotType: 'same_language_family',
    estimatedLearningTime: 'weeks',
    reasoning: 'Both Python web frameworks'
  },
  {
    fromSkill: 'Spring Boot',
    toSkill: 'NestJS',
    transferabilityScore: 0.60,
    pivotType: 'same_paradigm',
    estimatedLearningTime: 'months',
    reasoning: 'Both enterprise-style backend frameworks'
  },
  // Cloud platforms
  {
    fromSkill: 'AWS',
    toSkill: 'Google Cloud',
    transferabilityScore: 0.70,
    pivotType: 'same_domain',
    estimatedLearningTime: 'months',
    reasoning: 'Cloud concepts transfer, services differ'
  },
  {
    fromSkill: 'AWS',
    toSkill: 'Azure',
    transferabilityScore: 0.70,
    pivotType: 'same_domain',
    estimatedLearningTime: 'months',
    reasoning: 'Cloud concepts transfer, services differ'
  },
  // Databases
  {
    fromSkill: 'PostgreSQL',
    toSkill: 'MySQL',
    transferabilityScore: 0.85,
    pivotType: 'same_paradigm',
    estimatedLearningTime: 'weeks',
    reasoning: 'Both relational SQL databases'
  },
  {
    fromSkill: 'MongoDB',
    toSkill: 'DynamoDB',
    transferabilityScore: 0.65,
    pivotType: 'same_paradigm',
    estimatedLearningTime: 'months',
    reasoning: 'Both NoSQL document stores'
  },
  // Complementary - career pivot
  {
    fromSkill: 'Backend Development',
    toSkill: 'DevOps',
    transferabilityScore: 0.70,
    pivotType: 'complementary',
    estimatedLearningTime: 'months',
    reasoning: 'Backend engineers understand deployment, need infrastructure skills'
  },
  {
    fromSkill: 'Frontend Developer',
    toSkill: 'Full Stack',
    transferabilityScore: 0.65,
    pivotType: 'complementary',
    estimatedLearningTime: 'months',
    reasoning: 'Frontend foundation, needs backend skills'
  },
];
```

2. **Detection function:**
```typescript
function findTransferableSkills(candidateSkills: string[]): TransferableSkill[]
```
- For each candidate skill, find matching rules in TRANSFERABLE_SKILL_RULES
- Use normalizeSkillName() for matching
- Return sorted by transferabilityScore descending
- Do NOT return skills the candidate already has

3. **Import normalizeSkillName from skills-service.**

4. **Export:**
- `findTransferableSkills`
- `TransferableSkill` type
- `TRANSFERABLE_SKILL_RULES` for testing
  </action>
  <verify>
```bash
cd "/Volumes/Extreme Pro/myprojects/headhunter/functions"
npx tsc --noEmit
```
TypeScript compilation passes.
  </verify>
  <done>
- TRANSFERABLE_SKILL_RULES contains 15+ transferability mappings
- findTransferableSkills() returns sorted TransferableSkill[]
- Covers language families, paradigms, domains, and complementary pivots
- Uses normalizeSkillName for skill matching
- TypeScript compiles cleanly
  </done>
</task>

<task type="auto">
  <name>Task 3: Export module from skills-service.ts</name>
  <files>functions/src/shared/skills-service.ts</files>
  <action>
Add re-exports from skills-service.ts to make skills-inference.ts accessible:

1. Add to skills-service.ts (append after existing exports):
```typescript
// Re-export skill inference functions
export {
  inferSkillsFromTitle,
  findTransferableSkills,
  type InferredSkill,
  type TransferableSkill
} from './skills-inference';
```

This allows single import:
```typescript
import {
  normalizeSkillName,
  expandSkills,
  inferSkillsFromTitle,
  findTransferableSkills
} from './shared/skills-service';
```
  </action>
  <verify>
```bash
cd "/Volumes/Extreme Pro/myprojects/headhunter/functions"
npx tsc --noEmit
```
TypeScript compilation passes.
  </verify>
  <done>
- skills-service.ts re-exports inferSkillsFromTitle, findTransferableSkills, InferredSkill, TransferableSkill
- Single import point for all skill intelligence functions
- TypeScript compiles cleanly
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `cd functions && npx tsc --noEmit`
2. Module loads: `node -e "require('./lib/shared/skills-inference')" 2>&1 | head -5`
3. Pattern count logged at initialization
</verification>

<success_criteria>
1. skills-inference.ts exists with 14+ job title patterns
2. inferSkillsFromTitle() returns InferredSkill[] with confidence 0-1
3. findTransferableSkills() identifies career pivot opportunities
4. All functions exported via skills-service.ts
5. TypeScript compiles cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/06-skills-intelligence/06-02-SUMMARY.md`
</output>
