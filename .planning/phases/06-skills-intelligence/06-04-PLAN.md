---
phase: 06-skills-intelligence
plan: 04
type: execute
wave: 3
depends_on: ["06-03"]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "Searching for Python returns candidates who have Django or Flask (related skills)"
    - "Related skills are flagged with relationship type (related, transferable)"
    - "Skills inference detects implied skills from job titles (Full Stack implies JS + backend)"
    - "Inferred skills include confidence score (0-1)"
    - "Transferable skills appear with explanation"
  artifacts:
    - path: "functions/src/shared/skills-graph.ts"
      provides: "BFS-based skill expansion"
      exports: ["expandSkills", "getCachedSkillExpansion"]
    - path: "functions/src/shared/skills-inference.ts"
      provides: "Job title inference and transferable skills"
      exports: ["inferSkillsFromTitle", "findTransferableSkills"]
  key_links:
    - from: "functions/src/vector-search.ts"
      to: "functions/src/shared/skills-service.ts"
      via: "imports skill expansion and inference"
      pattern: "getCachedSkillExpansion"
---

<objective>
Verify all Phase 6 success criteria are met and the skills intelligence features work end-to-end.

Purpose: Confirm that skill expansion, inference, and transferable skills detection are properly integrated and working.

Output: Verification report confirming all success criteria.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-skills-intelligence/06-01-SUMMARY.md
@.planning/phases/06-skills-intelligence/06-02-SUMMARY.md
@.planning/phases/06-skills-intelligence/06-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify TypeScript compilation</name>
  <files></files>
  <action>
Run TypeScript compilation to ensure all new code compiles cleanly:

```bash
cd "/Volumes/Extreme Pro/myprojects/headhunter/functions"
npx tsc --noEmit
```

Expected: No errors or warnings.
  </action>
  <verify>
TypeScript compilation passes with no errors.
  </verify>
  <done>
TypeScript compiles cleanly for all Phase 6 changes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify skill expansion functionality</name>
  <files></files>
  <action>
Test skill expansion module by running a Node.js verification script:

```bash
cd "/Volumes/Extreme Pro/myprojects/headhunter/functions"

# Build first
npm run build

# Test skill expansion
node -e "
const { expandSkills, getCachedSkillExpansion, getRelatedSkillIds } = require('./lib/shared/skills-graph');

console.log('=== Skills Graph Verification ===');
console.log('');

// Test 1: Python expansion should include Django, Flask, ML
const pythonExpansion = expandSkills('Python', 2, 10);
console.log('Test 1: Python expansion');
console.log('  Original:', pythonExpansion.originalSkill);
console.log('  Related skills found:', pythonExpansion.relatedSkills.length);
pythonExpansion.relatedSkills.slice(0, 5).forEach(s => {
  console.log('    -', s.skillName, '(confidence:', s.confidence.toFixed(2), 'distance:', s.distance + ')');
});
console.log('');

// Test 2: Bidirectional - Django should find Python
const djangoExpansion = expandSkills('Django', 2, 10);
console.log('Test 2: Django expansion (bidirectional test)');
console.log('  Related skills:', djangoExpansion.relatedSkills.map(s => s.skillName).join(', '));
const hasPython = djangoExpansion.relatedSkills.some(s => s.skillName === 'Python');
console.log('  Includes Python:', hasPython ? 'YES' : 'NO');
console.log('');

// Test 3: Caching works
console.log('Test 3: Caching');
const cached1 = getCachedSkillExpansion('JavaScript', 2);
const cached2 = getCachedSkillExpansion('JavaScript', 2);
console.log('  Cache returns consistent results:', cached1.relatedSkills.length === cached2.relatedSkills.length ? 'YES' : 'NO');
console.log('');

console.log('=== Skill Expansion Tests Complete ===');
"
```

Expected output should show:
- Python expands to Django, Flask, ML-related skills
- Django expansion includes Python (bidirectional)
- Caching works correctly
  </action>
  <verify>
Node.js test script runs without errors and shows expected skill relationships.
  </verify>
  <done>
- Python expansion includes Django, Flask, ML skills
- Bidirectional relationships work (Django -> Python)
- LRU cache returns consistent results
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify skill inference functionality</name>
  <files></files>
  <action>
Test skill inference module:

```bash
cd "/Volumes/Extreme Pro/myprojects/headhunter/functions"

node -e "
const { inferSkillsFromTitle, findTransferableSkills } = require('./lib/shared/skills-inference');

console.log('=== Skills Inference Verification ===');
console.log('');

// Test 1: Full Stack Engineer title inference
console.log('Test 1: Full Stack Engineer inference');
const fullStackSkills = inferSkillsFromTitle('Senior Full Stack Engineer');
console.log('  Inferred skills:', fullStackSkills.length);
fullStackSkills.slice(0, 5).forEach(s => {
  console.log('    -', s.skill, '(confidence:', s.confidence.toFixed(2), 'category:', s.category + ')');
});
const hasJS = fullStackSkills.some(s => s.skill.toLowerCase().includes('javascript'));
const hasSQL = fullStackSkills.some(s => s.skill.toLowerCase().includes('sql'));
console.log('  Includes JavaScript:', hasJS ? 'YES' : 'NO');
console.log('  Includes SQL:', hasSQL ? 'YES' : 'NO');
console.log('');

// Test 2: DevOps title inference
console.log('Test 2: DevOps Engineer inference');
const devopsSkills = inferSkillsFromTitle('DevOps Engineer');
console.log('  Inferred skills:', devopsSkills.map(s => s.skill).join(', '));
console.log('');

// Test 3: Transferable skills
console.log('Test 3: Transferable skills for Java developer');
const javaTransferable = findTransferableSkills(['Java', 'Spring Boot', 'SQL']);
console.log('  Transferable opportunities:', javaTransferable.length);
javaTransferable.slice(0, 3).forEach(t => {
  console.log('    -', t.fromSkill, '->', t.toSkill, '(score:', t.transferabilityScore.toFixed(2) + ')');
  console.log('      ', t.reasoning);
});
console.log('');

console.log('=== Skill Inference Tests Complete ===');
"
```

Expected output should show:
- Full Stack infers JavaScript, SQL, React, etc.
- DevOps infers Docker, Kubernetes, CI/CD
- Java developer has Kotlin as transferable skill
  </action>
  <verify>
Node.js test script runs without errors and shows expected inferences.
  </verify>
  <done>
- Full Stack Engineer title infers JavaScript, SQL, React, Node.js
- DevOps Engineer title infers Docker, Kubernetes, CI/CD, Linux
- Transferable skills detected (Java -> Kotlin)
  </done>
</task>

<task type="auto">
  <name>Task 4: Document Phase 6 completion</name>
  <files></files>
  <action>
Create verification summary documenting all success criteria:

**Phase 6 Success Criteria Verification:**

| Criterion | Status | Evidence |
|-----------|--------|----------|
| Searching for "Python" returns candidates who have "Django" or "Flask" | PASS | Python expansion includes Django, Flask in relatedSkills |
| Related skills are flagged with relationship type | PASS | SkillMatchResult.matchType = 'exact' \| 'related' \| 'inferred' |
| Skills inference detects implied skills from job titles | PASS | inferSkillsFromTitle('Full Stack') returns JS, SQL, etc. |
| Inferred skills include confidence score (0-1) | PASS | InferredSkill.confidence is 0-1 scale |
| Transferable skills appear with explanation | PASS | TransferableSkill.reasoning explains pivot |

**Files Created/Modified:**
- NEW: functions/src/shared/skills-graph.ts (BFS expansion, LRU caching)
- NEW: functions/src/shared/skills-inference.ts (title patterns, transferable rules)
- MODIFIED: functions/src/shared/skills-service.ts (re-exports)
- MODIFIED: functions/src/vector-search.ts (skill expansion in matching)
- MODIFIED: functions/src/skill-aware-search.ts (inference integration)

**Exports Added:**
- expandSkills, getCachedSkillExpansion, getRelatedSkillIds, clearSkillExpansionCache
- inferSkillsFromTitle, findTransferableSkills
- SkillExpansionResult, InferredSkill, TransferableSkill types

Update STATE.md to mark Phase 6 complete.
  </action>
  <verify>
All 5 success criteria verified.
  </verify>
  <done>
- All Phase 6 success criteria verified
- STATE.md updated to show Phase 6 complete
- Ready for Phase 7 (Signal Scoring Implementation)
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `cd functions && npx tsc --noEmit`
2. Skill expansion test passes
3. Skill inference test passes
4. All 5 success criteria from ROADMAP.md verified
</verification>

<success_criteria>
1. Searching for "Python" returns candidates who have "Django" or "Flask" (related skills)
2. Related skills are flagged with relationship type (e.g., "related", "transferable")
3. Skills inference detects implied skills from job titles (e.g., "Full Stack" implies JS + backend)
4. Inferred skills include confidence score (0-1)
5. Transferable skills (e.g., "Java" -> "Kotlin" pivot potential) appear with explanation
</success_criteria>

<output>
After completion, create `.planning/phases/06-skills-intelligence/06-04-SUMMARY.md`
</output>
