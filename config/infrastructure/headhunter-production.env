# Headhunter production infrastructure configuration
PROJECT_ID=headhunter-ai-0088
REGION=us-central1
SECONDARY_REGION=us-central1

# Networking
VPC_NAME=vpc-hh
VPC_SUBNET_RUN=hh-run-subnet
VPC_SUBNET_SQL=hh-sql-subnet
VPC_SUBNET_REDIS=hh-redis-subnet
# Cloud Run services must deploy with --vpc-connector "$VPC_CONNECTOR" and --vpc-egress all-traffic for egress allowlisting to take effect.
VPC_CONNECTOR=svpc-us-central1
NAT_GATEWAY_NAME=hh-nat-gateway
ROUTER_NAME=hh-vpc-router
# Restrict CIDRs where possible; the firewall allow/deny pair only applies when services use --vpc-egress all-traffic.
CONNECTOR_EGRESS_ALLOWED_CIDRS=0.0.0.0/0

# Cloud SQL
SQL_INSTANCE=sql-hh-core
SQL_DATABASE=headhunter
SQL_TIER=db-custom-2-7680
SQL_STORAGE_SIZE_GB=200
SQL_BACKUP_RETENTION_DAYS=14
SQL_TRANSACTION_LOG_RETENTION_DAYS=7
SQL_MAINTENANCE_WINDOW_DAY=7
SQL_MAINTENANCE_WINDOW_HOUR=5
SQL_FLAGS=shared_buffers=4096,max_connections=800,track_io_timing=on
SQL_USER_APP=hh_app
SQL_USER_ADMIN=hh_admin
SQL_USER_ANALYTICS=hh_analytics

# Database schemas
SCHEMA_SEARCH=search
SCHEMA_TAXONOMY=taxonomy
SCHEMA_MSGS=msgs
SCHEMA_OPS=ops

# Memorystore Redis
REDIS_INSTANCE=redis-skills-us-central1
REDIS_MEMORY_SIZE_GB=8
REDIS_REPLICA_COUNT=1
REDIS_TLS_ENABLED=true

# Pub/Sub topics and subscriptions
PUBSUB_TOPIC_PROFILES=profiles.refresh.request
PUBSUB_SUBSCRIPTION_PROFILES=profiles.refresh.request.sub
PUBSUB_TOPIC_POSTINGS=postings.refresh.request
PUBSUB_SUBSCRIPTION_POSTINGS=postings.refresh.request.sub
PUBSUB_DLQ_TOPIC=refresh.jobs.dlq
PUBSUB_DLQ_SUBSCRIPTION=refresh.jobs.dlq.sub

# Secret Manager secrets
SECRET_DB_PRIMARY=db-primary-password
SECRET_DB_REPLICA=db-replica-password
SECRET_DB_ANALYTICS=db-analytics-password
SECRET_TOGETHER_AI=together-ai-api-key
SECRET_GEMINI_AI=gemini-api-key
SECRET_OAUTH_CLIENT=oauth-client-credentials
SECRET_REDIS_ENDPOINT=redis-endpoint
SECRET_STORAGE_SIGNER=storage-signer-key

# Cloud Storage buckets
BUCKET_RAW_PROFILES=hh-raw-profiles-us-central1
BUCKET_POSTINGS=hh-postings-us-central1
BUCKET_PROCESSED=hh-processed-artifacts-us-central1
BUCKET_EXPORTS=hh-exports-us-central1

# Cloud Run services
RUN_SERVICE_EMBED=hh-embed-svc
RUN_SERVICE_SEARCH=hh-search-svc
RUN_SERVICE_RERANK=hh-rerank-svc
RUN_SERVICE_EVIDENCE=hh-evidence-svc
RUN_SERVICE_ECO=hh-eco-svc
RUN_SERVICE_ENRICH=hh-enrich-svc
RUN_SERVICE_ADMIN=hh-admin-svc
RUN_SERVICE_MSGS=hh-msgs-svc

# Cloud Run service accounts (without domain suffix)
SVC_EMBED=embed-production
SVC_SEARCH=search-production
SVC_RERANK=rerank-production
SVC_EVIDENCE=evidence-production
SVC_ECO=eco-production
SVC_ENRICH=enrich-production
SVC_ADMIN=admin-production
SVC_MSGS=msgs-production

# Legacy aliases retained for existing automation scripts
SVC_PROFILES=$SVC_EMBED
SVC_POSTINGS=$SVC_RERANK
SVC_REFRESH=$SVC_ENRICH
SVC_UI=$SVC_EVIDENCE
SVC_INSIGHTS=$SVC_ECO

# Artifact Registry and build
ARTIFACT_REGISTRY=us-central1-docker.pkg.dev/headhunter-ai-0088/services
BUILD_TRIGGER=hh-services-trigger

# Observability
LOGGING_SINK=hh-prod-logging-sink
MONITORING_WORKSPACE=headhunter-monitoring
ALERTING_CHANNEL=headhunter-pagerduty
