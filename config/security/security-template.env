# -----------------------------------------------------------------------------
# Headhunter Security Configuration Template
#
# Copy this file to security.<env>.env and adjust values for each deployment
# environment. The template captures the knobs referenced by setup_security_and_iam
# and other automation scripts.
# -----------------------------------------------------------------------------

# Target environment identifier (staging|production|sandbox)
SECURITY_ENV=staging

# Primary GCP project used by the automation
SECURITY_PROJECT_ID=headhunter-staging

# Cloud Run region for security scans and IAM bindings
SECURITY_REGION=us-central1

# -----------------------------------------------------------------------------
# IAM ROLE PROFILES
# -----------------------------------------------------------------------------

# Comma-separated list of additional project roles to grant in staging beyond the
# baseline least-privilege set (e.g., troubleshooting permissions).
EXTRA_STAGING_ROLES=roles/logging.viewer,roles/monitoring.viewer

# Production should remain as restrictive as possible; keep this blank unless a
# temporary break-glass exception is required.
EXTRA_PRODUCTION_ROLES=

# -----------------------------------------------------------------------------
# OAUTH2 / IDENTITY PROVIDER
# -----------------------------------------------------------------------------

# Base domain for the identity provider (used by configure_oauth2_clients.sh).
IDP_DOMAIN=idp.example.com

# OAuth management credentials. In production the secret values should be pulled
# from Secret Manager rather than stored in plaintext.
IDP_MGMT_CLIENT_ID=replace-me
IDP_MGMT_CLIENT_SECRET=replace-me

# Audience / API identifier to assign to machine-to-machine grants.
IDP_DEFAULT_AUDIENCE=https://api.ella.jobs/gateway

# Optional scopes to attach to OAuth2 client credentials (comma-separated).
IDP_ALLOWED_SCOPES=read:profiles,write:messages

# -----------------------------------------------------------------------------
# SECRET MANAGER ROTATION
# -----------------------------------------------------------------------------

# Default rotation period in seconds (90 days by default) applied by
# setup_secret_manager_headhunter.sh unless overridden below.
SECRET_ROTATION_PERIOD=7776000

# Per-secret overrides keyed by the exact Secret Manager id (secret_name=seconds).
# Example: SECRET_ROTATION_OVERRIDE_db-primary-password=2592000

# -----------------------------------------------------------------------------
# TENANT VALIDATION SETTINGS
# -----------------------------------------------------------------------------

# Firestore collection storing tenant metadata.
TENANT_COLLECTION=organizations

# Toggle to require the X-Tenant-ID header on all authenticated requests.
REQUIRE_TENANT_HEADER=true

# Toggle to run cross-tenant isolation checks during validation.
ENFORCE_TENANT_ISOLATION=true

# -----------------------------------------------------------------------------
# AUDIT & MONITORING
# -----------------------------------------------------------------------------

# Sink where audit logs should be routed (Cloud Storage bucket or BigQuery dataset).
AUDIT_SINK_DESTINATION=storage.googleapis.com/headhunter-audit-staging

# Notification channels for security alerting (comma-separated channel IDs).
SECURITY_ALERT_CHANNELS=

# Dashboard display name override for setup_security_monitoring.sh.
SECURITY_DASHBOARD_NAME=Headhunter Security Overview (Staging)

# -----------------------------------------------------------------------------
# END OF TEMPLATE
# -----------------------------------------------------------------------------
