{
  "displayName": "Platform Cost Overview",
  "dashboardFilters": [
    {
      "filterType": "METRIC_LABEL",
      "labelKey": "environment",
      "templateVariable": "env"
    }
  ],
  "mosaicLayout": {
    "columns": 12,
    "tiles": [
      {
        "width": 6,
        "height": 4,
        "widget": {
          "title": "Total Cost (Daily/Weekly/Monthly)",
          "xyChart": {
            "dataSets": [
              {
                "plotType": "LINE",
                "legendTemplate": "daily",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/daily_total_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "3600s",
                      "perSeriesAligner": "ALIGN_MAX"
                    }
                  }
                }
              },
              {
                "plotType": "LINE",
                "legendTemplate": "weekly",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/weekly_total_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "86400s",
                      "perSeriesAligner": "ALIGN_MAX"
                    }
                  }
                }
              },
              {
                "plotType": "LINE",
                "legendTemplate": "monthly",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/monthly_total_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "86400s",
                      "perSeriesAligner": "ALIGN_MAX"
                    }
                  }
                }
              }
            ],
            "yAxis": {
              "label": "USD"
            }
          }
        }
      },
      {
        "width": 6,
        "height": 4,
        "widget": {
          "title": "Cost Trend & Projection",
          "xyChart": {
            "dataSets": [
              {
                "plotType": "LINE",
                "legendTemplate": "actual",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/daily_total_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "86400s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                }
              },
              {
                "plotType": "LINE",
                "legendTemplate": "projection",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/projected_month_end_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "86400s",
                      "perSeriesAligner": "ALIGN_MAX"
                    }
                  }
                }
              }
            ],
            "yAxis": {
              "label": "USD"
            }
          }
        }
      },
      {
        "width": 12,
        "height": 4,
        "widget": {
          "title": "Cost by Service",
          "xyChart": {
            "dataSets": [
              {
                "plotType": "STACKED_BAR",
                "legendTemplate": "{{metric.label.service}}",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/service_cost_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "86400s",
                      "perSeriesAligner": "ALIGN_SUM"
                    }
                  }
                }
              }
            ],
            "yAxis": {
              "label": "USD/day"
            }
          }
        }
      },
      {
        "width": 12,
        "height": 4,
        "widget": {
          "title": "Cost by Tenant",
          "xyChart": {
            "dataSets": [
              {
                "plotType": "STACKED_BAR",
                "legendTemplate": "{{metric.label.tenant}}",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/tenant_cost_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "86400s",
                      "perSeriesAligner": "ALIGN_SUM"
                    }
                  }
                }
              }
            ],
            "yAxis": {
              "label": "USD/day"
            }
          }
        }
      },
      {
        "width": 6,
        "height": 4,
        "widget": {
          "title": "Cost per API Call",
          "xyChart": {
            "dataSets": [
              {
                "plotType": "LINE",
                "legendTemplate": "avg cost",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/api_cost_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "3600s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                }
              }
            ],
            "yAxis": {
              "label": "USD/request"
            }
          }
        }
      },
      {
        "width": 6,
        "height": 4,
        "widget": {
          "title": "Cost Efficiency",
          "xyChart": {
            "dataSets": [
              {
                "plotType": "LINE",
                "legendTemplate": "cost per successful request",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/cost_per_success_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "3600s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                }
              },
              {
                "plotType": "LINE",
                "legendTemplate": "cost per search",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/cost_per_search_usd\"",
                    "aggregation": {
                      "alignmentPeriod": "3600s",
                      "perSeriesAligner": "ALIGN_MEAN"
                    }
                  }
                }
              }
            ],
            "yAxis": {
              "label": "USD"
            }
          }
        }
      },
      {
        "width": 12,
        "height": 4,
        "widget": {
          "title": "Cost Anomaly Detection",
          "xyChart": {
            "dataSets": [
              {
                "plotType": "LINE",
                "legendTemplate": "anomaly score",
                "timeSeriesQuery": {
                  "timeSeriesFilter": {
                    "filter": "metric.type=\"custom.googleapis.com/hh_costs/anomaly_score\"",
                    "aggregation": {
                      "alignmentPeriod": "3600s",
                      "perSeriesAligner": "ALIGN_MAX"
                    }
                  }
                }
              }
            ]
          }
        }
      },
      {
        "width": 12,
        "height": 4,
        "widget": {
          "title": "Recent Cost Events",
          "logPanel": {
            "filter": "logName=\"projects/headhunter-ai-0088/logs/ops.cost_logs\"",
            "tableDisplayOptions": {
              "shownColumns": ["timestamp", "jsonPayload.tenant_id", "jsonPayload.api_name", "jsonPayload.cost_cents", "text"]
            }
          }
        }
      }
    ]
  }
}
